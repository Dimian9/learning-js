<!DOCTYPE html>
<html>
  <head>
    <title>Advanced Functions</title>
  </head>
  <body>
    <button class="js-button">Start</button>

    <button onclick="displayMessage()
    ">Add to cart</button>
    <p class="js-message"></p>

    <button onclick="messages++;
    displayNotification();">Add</button>
    <button onclick="
    if (messages > 0) {
        messages--;
        if (messages === 0) {
            stopNotification();
        }
    }">Remove</button>
    <script>


        // functions are values
        const num = 2;
        const function1 = function greeting() {
            console.log('hello2')
        }; // anonymous function - without greeting

        console.log(function1);
        console.log(typeof function1);
        function1();

        //Adv of following code 
        // hoisting - calling function before we write code
        function greeting() {
            console.log('hello')
        }
        greeting(); 

        // method = function saved in an object
        const object1 = {
            num: 2,
            fun: function greeting() {
                console.log('hello3');
            }
        };
        object1.fun();

        // func inside parameter
        // passing a func into another func
        function run(param) {
            param();
        }

        run(function() {
            console.log('hello4');
        });

        //runs a func after some milliseconds
        setTimeout(function() {
            console.log('timeout');
        }, 3000);

        console.log('next line')

        //runs a func after some time AND keeps running it
        setInterval(function() {
            console.log('interval');
            console.log('interval2');

        }, 3000);

        console.log('next line 2')

        //Arrow func
        const arrowFunctiin = () => {
            console.log('hello')
        }

        arrowFunctiin();


//EXERCISES
        const add = function () {
            console.log(2+3);
        }

        add();
        add();

        function runTwice(fun) {
            fun();
            fun();
        }
        
        runTwice(function() {
            console.log('12b');
        });
      
        runTwice(add);

        function updateButton() {
            const button = document.querySelector('.js-button')
            .addEventListener('click', () => {
                button.innerHTML = 'Loading...'
            setTimeout(() => {
                button.innerHTML = 'Finished!'
            }, 1000)
            });

        };


        let timeoutId;

        function displayMessage() {
            const addMessage = document.querySelector('.js-message');
            addMessage.innerHTML = 'Added'
            setTimeout(() => {
                addMessage.innerHTML = ''
            }, 2000)

            clearTimeout(timeoutId);

            timeoutId = setTimeoutId(() => {
                addMessage.innerHTML = ''
            }, 2000)
        }


        let messages = 2;
        let intervalId;
        let isDisplayingNotification;
        displayNotification();

        function displayNotification() {
            if (isDisplayingNotification) {
                return;
            }
            
                isDisplayingNotification = true;

                intervalId = setInterval(function() {
                if (document.title === 'App') {
                document.title = `(${messages}) New messages`;
                } else {
                document.title = 'App';
                }
            }, 1000);
        }

        function stopNotification() {
            isDisplayingNotification = false;

            clearInterval(intervalId);
            document.title = 'App';
        }

// PART 2
        multiply = (num1, num2) => num1 * num2;
            
        multiply(2,3);
    
        const countPositive = (nums) => {
            let positiveNumbers = 0;

            nums.forEach((num) => {
              if (num > 0) {
                positiveNumbers++ ;
              }
            });
            return positiveNumbers;
        }

        countPositive([1,-3,5])

        const addNum = (array, num) => {
            return array.map((value) => value + num)
        }

        addNum([1,2,3], 2)



        const removeEgg = (foods) => {
            let eggsRemoved = 0;

            return foods.filter((food) => {
                if (food === 'egg' && eggsRemoved < 2) {
                    eggsRemoved++;
                    return false
                }
                return true;
            })
        }
        
        removeEgg(['egg', 'apple', 'egg', 'egg'])
        
    </script>
  </body>